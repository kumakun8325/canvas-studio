⚠️  [BashTool] Pre-flight check is taking longer than expected. Run with ANTHROPIC_LOG=debug to check for failed or slow API requests.
⚠️  [BashTool] Pre-flight check is taking longer than expected. Run with ANTHROPIC_LOG=debug to check for failed or slow API requests.
すべてのテストがパスしました。

## 修正完了

Issue #33 のバグ修正が完了しました。

### 修正内容

**ファイル**: `src/hooks/useCanvas.ts`

**問題**: `handleSave` クロージャが古い `currentSlideId` を参照していたため、スライド切り替え後にオブジェクトを追加しても Undo が正しく動作しませんでした。

**修正**: 
1. `handleSave` 関数を `useEffect` の外に移動し、`useCallback` で定義しました
2. 依存配列に `currentSlideId` と `saveCanvasToSlide` を含めました
3. これにより、`currentSlideId` が変更されるたびに `handleSave` が再作成され、最新のスライドIDを参照するようになります

### テスト

新しいテストファイル `src/test/task33-slide-switch-history.test.tsx` を作成し、以下のテストケースを追加しました：
- スライド切り替え後に正しいスライドで履歴が記録されること
- `currentSlideId` の変更が正しく追跡されること
- 複数回のスライド切り替えが正しく処理されること

すべてのテストがパスしています（35 passed, 1 skipped）。
